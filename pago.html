<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pago y datos fiscales — Thrift Cálido Bazar</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <style>
    body { background-color:#f8fafc; }
    .btn-burly { background-color: burlywood; color:#fff; }
    .btn-burly:hover { filter:brightness(0.9); color:#fff; }
    .table thead th { background:#0f172a; color:#fff; }
    .card-hover:hover{ transform:translateY(-4px); box-shadow:0 8px 18px rgba(0,0,0,.12); }
    .icon-pago{ height:24px; margin-right:6px; }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-4">
    <a class="navbar-brand d-flex align-items-center" href="index.html">
      <i class="bi bi-shop me-2" style="color: burlywood; font-size:1.4rem"></i>
      <span style="color: burlywood; font-weight: bold;">Thrift Cálido Bazar</span>
    </a>
    <div class="ms-auto d-flex gap-2 flex-wrap">
      <a href="index.html" class="btn btn-sm btn-burly">Inicio</a>
      <a href="catalog.html" class="btn btn-sm btn-burly">Catálogo</a>
      <a href="cart.html" class="btn btn-sm btn-burly">Carrito</a>
      <a href="pago.html" class="btn btn-sm btn-burly active">Pago</a>
      <a href="pago.html" class="btn btn-sm btn-outline-light">Micropagos</a>
      <span id="navUserName" class="text-white-50 small ms-2"></span>
      <button class="btn btn-sm btn-outline-light" onclick="cerrarSesion()">
        <i class="bi bi-box-arrow-right"></i> Cerrar sesión
      </button>
    </div>
  </nav>

  <div class="container my-5">
    <h1 class="fw-bold text-center" style="color:burlywood;">Método de pago y datos fiscales</h1>

    <!-- Resumen de la compra -->
    <section class="mb-4">
      <h2 class="h5 fw-bold">Resumen de la compra</h2>
      <div class="table-responsive mt-2">
        <table class="table table-sm align-middle">
          <thead>
            <tr>
              <th>Producto</th>
              <th>Cantidad</th>
              <th>Precio</th>
              <th>Subtotal</th>
            </tr>
          </thead>
          <tbody id="cart-body"></tbody>
          <tfoot>
            <tr>
              <th colspan="3" class="text-end">Total:</th>
              <th id="cart-total">$0</th>
            </tr>
          </tfoot>
        </table>
      </div>
    </section>

    <!-- Pago + Fiscales -->
    <div class="row g-4">
      <!-- Columna izquierda: métodos de pago -->
      <div class="col-lg-7">
        <div class="card shadow-sm">
          <div class="card-body">
            <h2 class="h5 fw-bold mb-3">Método de pago</h2>
            <p class="small text-muted">
              Selecciona uno de los métodos de pago. Si eliges monedero electrónico, se usará el saldo acumulado desde Micropagos.
            </p>

            <!-- Radios de métodos de pago -->
            <div class="mb-3">

              <!-- Tarjeta -->
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="metodoPago" id="pagoTarjeta" value="Tarjeta" checked>
                <label class="form-check-label" for="pagoTarjeta">
                  <img src="img/pago-tarjeta.png" class="icon-pago" alt="Tarjeta"> Tarjeta
                </label>
              </div>

              <!-- SPEI -->
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="metodoPago" id="pagoSPEI" value="Transferencia SPEI">
                <label class="form-check-label" for="pagoSPEI">
                  <i class="bi bi-bank"></i> SPEI
                </label>
              </div>

              <!-- Depósito -->
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="metodoPago" id="pagoDeposito" value="Depósito bancario">
                <label class="form-check-label" for="pagoDeposito">
                  <i class="bi bi-cash-stack"></i> Depósito
                </label>
              </div>

              <!-- Cajero -->
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="metodoPago" id="pagoCajero" value="Cajero automático">
                <label class="form-check-label" for="pagoCajero">
                  <i class="bi bi-credit-card"></i> Cajero automático
                </label>
              </div>

              <!-- OXXO -->
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="metodoPago" id="pagoOxxo" value="Pago en OXXO">
                <label class="form-check-label" for="pagoOxxo">
                  <img src="img/pago-oxxo.png" class="icon-pago" alt="OXXO"> OXXO
                </label>
              </div>

              <!-- Monedero -->
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="metodoPago" id="pagoMonedero" value="Monedero electrónico">
                <label class="form-check-label" for="pagoMonedero">
                  <img src="img/pago-deposito.png" class="icon-pago" alt="Monedero"> Monedero
                </label>
              </div>

              <!-- Micropago -->
              <div class="form-check form-check-inline mt-2">
                <input class="form-check-input" type="radio" name="metodoPago" id="pagoMicropago" value="Micropago">
                <label class="form-check-label" for="pagoMicropago">
                  <i class="bi bi-coin"></i> Micropago
                </label>
              </div>

              <!-- Cheque electrónico -->
              <div class="form-check form-check-inline mt-2">
                <input class="form-check-input" type="radio" name="metodoPago" id="pagoCheque" value="Cheque electrónico">
                <label class="form-check-label" for="pagoCheque">
                  <i class="bi bi-receipt"></i> Cheque electrónico
                </label>
              </div>

            </div>

            <!-- Datos de tarjeta -->
            <div id="datosTarjeta">
              <h6 class="fw-bold mb-2">Datos de la tarjeta</h6>
              <div class="mb-3">
                <label class="form-label">Nombre en la tarjeta</label>
                <input type="text" id="cardName" class="form-control form-control-sm" placeholder="Como aparece en la tarjeta">
              </div>
              <div class="mb-3">
                <label class="form-label">Número de tarjeta</label>
                <input type="text" id="cardNumber" class="form-control form-control-sm" placeholder="XXXX XXXX XXXX XXXX">
              </div>
              <div class="row g-3">
                <div class="col-md-6">
                  <label class="form-label">Fecha de expiración</label>
                  <input type="text" id="cardExp" class="form-control form-control-sm" placeholder="MM/AA">
                </div>
                <div class="col-md-6">
                  <label class="form-label">CVV</label>
                  <input type="password" id="cardCVV" class="form-control form-control-sm" placeholder="XXX">
                </div>
              </div>
              <p class="text-muted small mt-2">
                Estos datos son solo de ejemplo y no se envían a ningún procesador real.
              </p>
            </div>

            <!-- Información dinámica para otros métodos -->
            <div id="infoOtrosMetodos" class="mt-3" style="display:none;"></div>

            <!-- Micropago -->
            <div id="datosMicropago" class="mt-3" style="display:none;">
              <h6 class="fw-bold mb-2">Micropago</h6>
              <p class="small text-muted">Selecciona un monto pequeño para pagar:</p>

              <div class="d-flex gap-2 mb-2">
                <button class="btn btn-outline-secondary btn-sm micropago-btn" data-amount="10">$10</button>
                <button class="btn btn-outline-secondary btn-sm micropago-btn" data-amount="20">$20</button>
                <button class="btn btn-outline-secondary btn-sm micropago-btn" data-amount="50">$50</button>
              </div>

              <input type="hidden" id="micropagoMonto" value="0">
            </div>

            <!-- Cheque electrónico -->
            <div id="datosCheque" class="mt-3" style="display:none;">
              <h6 class="fw-bold mb-2">Cheque electrónico</h6>
              <div class="mb-2">
                <label class="form-label">Número de cheque</label>
                <input type="text" id="chequeNumero" class="form-control form-control-sm">
              </div>
              <div class="mb-2">
                <label class="form-label">Banco</label>
                <input type="text" id="chequeBanco" class="form-control form-control-sm">
              </div>
              <div class="mb-2">
                <label class="form-label">Fecha del cheque</label>
                <input type="date" id="chequeFecha" class="form-control form-control-sm">
              </div>
              <div class="mb-2">
                <label class="form-label">Monto del cheque</label>
                <input type="number" id="chequeMonto" class="form-control form-control-sm">
              </div>
              <p class="small text-muted mb-0">
                Estos datos son solo ilustrativos, no se conectan con ninguna institución bancaria.
              </p>
            </div>

            <!-- Escenario de prueba -->
            <div class="mt-4">
              <label for="escenarioPrueba" class="form-label small fw-bold">
                Escenario de prueba
              </label>
              <select id="escenarioPrueba" class="form-select form-select-sm w-auto">
                <option value="normal" selected>Flujo normal (aleatorio)</option>
                <option value="duplicado">Duplicado de tarjeta</option>
                <option value="fondos">Fondos insuficientes</option>
                <option value="doble">Pago doble</option>
                <option value="conexion">Fallo de conexión</option>
              </select>
            </div>

          </div>
        </div>
      </div>

      <!-- Columna derecha: datos fiscales + donación + botón -->
      <div class="col-lg-5">
        <div class="card shadow-sm mb-3">
          <div class="card-body">
            <h2 class="h5 fw-bold">Datos fiscales (opcional)</h2>
            <div class="form-check form-switch mb-2">
              <input class="form-check-input" type="checkbox" id="fiscalFactura">
              <label class="form-check-label" for="fiscalFactura">
                Quiero factura
              </label>
            </div>

            <div id="fiscalesSection" style="display:none;">
              <div class="mb-2">
                <label class="form-label">Nombre / Razón social</label>
                <input type="text" id="fiscalName" class="form-control form-control-sm">
              </div>
              <div class="mb-2">
                <label class="form-label">RFC</label>
                <input type="text" id="fiscalRFC" class="form-control form-control-sm" placeholder="XAXX010101000">
              </div>
              <div class="mb-2">
                <label class="form-label">Dirección</label>
                <input type="text" id="fiscalAddress" class="form-control form-control-sm">
              </div>
              <div class="mb-2">
                <label class="form-label">Código Postal</label>
                <input type="text" id="fiscalCP" class="form-control form-control-sm">
              </div>
              <div class="mb-2">
                <label class="form-label">Correo electrónico</label>
                <input type="email" id="fiscalEmail" class="form-control form-control-sm">
              </div>
              <p class="small text-muted mb-0">
                Toda la información capturada es solo de demostración. No se genera un CFDI real ni se envía al SAT.
              </p>
            </div>
          </div>
        </div>

        <!-- Donación opcional -->
        <div class="card shadow-sm mb-3 mt-3">
          <div class="card-body">
            <h2 class="h6 fw-bold mb-2">Donar al programa “Abrigo Cálido” (opcional)</h2>
            <p class="small text-muted">
              Si lo deseas, puedes agregar una donación para apoyar el programa 
              <strong>“Abrigo Cálido”</strong>, que realiza la entrega de prendas de abrigo a personas en situación vulnerable.
            </p>

            <div class="form-check form-switch mb-2">
              <input class="form-check-input" type="checkbox" id="donateToggle">
              <label class="form-check-label" for="donateToggle">
                Quiero agregar una donación a mi compra
              </label>
            </div>

            <div id="donationOptions" style="display:none;">
              <label class="form-label small mb-1">Selecciona un monto:</label>
              <div class="d-flex flex-wrap gap-2 mb-2">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="donateAmount" id="donate50" value="50" checked>
                  <label class="form-check-label" for="donate50">$50 MXN</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="donateAmount" id="donate100" value="100">
                  <label class="form-check-label" for="donate100">$100 MXN</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="donateAmount" id="donate200" value="200">
                  <label class="form-check-label" for="donate200">$200 MXN</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="donateAmount" id="donateCustomRadio" value="custom">
                  <label class="form-check-label" for="donateCustomRadio">Otro monto</label>
                </div>
              </div>

              <div class="mb-2">
                <input type="number" min="0" step="10" id="donateCustomAmount"
                      class="form-control form-control-sm"
                      placeholder="Ingresa monto personalizado" disabled>
              </div>

            </div>
          </div>
        </div>

        <div id="payment-status" class="alert d-none mt-3"></div>

        <div class="d-flex justify-content-between mt-3">
          <a href="cart.html" class="btn btn-outline-secondary btn-sm">
            <i class="bi bi-arrow-left"></i> Volver al carrito
          </a>
          <button class="btn btn-burly" id="btnConfirmarPago">
            Confirmar pago
          </button>
        </div>
      </div>
    </div>

  </div>

  <!-- Modal de compra exitosa -->
  <div class="modal fade" id="compraExitosaModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Compra realizada</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p>Tu compra ha sido procesada.</p>
          <p><strong>Folio:</strong> <span id="folioLabel"></span></p>
        </div>
        <div class="modal-footer">
          <a href="catalog.html" class="btn btn-burly">Volver al inicio</a>
        </div>
      </div>
    </div>
  </div>

 <div class="modal fade" id="avisoModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Aviso de Privacidad</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <p>
              En <strong>Thrift Cálido Bazar</strong> valoramos la privacidad de nuestros clientes y 
              nos comprometemos a proteger su información personal. Los datos proporcionados 
              (nombre, correo electrónico, teléfono) se utilizan exclusivamente para dar 
              seguimiento a sus consultas, pedidos o promociones relacionadas con nuestra tienda.
            </p>
            <p>
              No compartimos información personal con terceros sin consentimiento, salvo que 
              sea requerido por ley. El usuario puede ejercer sus derechos ARCO (Acceso, 
              Rectificación, Cancelación y Oposición) contactándonos a 
              <a href="mailto:thriftcalido@gmail.com">thriftcalido@gmail.com</a>.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Términos y Condiciones -->
<div class="modal fade" id="terminosModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Términos y Condiciones</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">

        <p>
          El uso del sitio web de <strong>Thrift Cálido Bazar</strong> implica la aceptación de los siguientes
          términos, políticas y condiciones aplicables a la venta de prendas de segunda mano.
        </p>

        <h5 class="mt-3">1. Naturaleza del producto</h5>
        <ul>
          <li>Las prendas ofrecidas son <strong>de segunda mano</strong>.</li>
          <li>Pueden presentar <strong>ligeros detalles propios del uso</strong>, como desgaste menor, fibras sueltas o variaciones en color.</li>
          <li>Las fotografías muestran el estado general de la prenda, pero pueden existir <strong>otros detalles no visibles</strong> o difíciles de capturar en imagen.</li>
          <li>Recomendamos <strong>lavar la prenda antes de su primer uso</strong> por higiene y conservación.</li>
        </ul>

        <h5 class="mt-3">2. Disponibilidad</h5>
        <ul>
          <li>El inventario está sujeto a disponibilidad; cada prenda es única.</li>
          <li>Las imágenes son representativas y pueden variar levemente.</li>
        </ul>

        <h5 class="mt-3">3. Compras y pedidos</h5>
        <ul>
          <li>El cliente se compromete a proporcionar información verídica al realizar un pedido.</li>
          <li>El sistema genera un <strong>folio de compra.
        </ul>

        <h5 class="mt-3">4. Cambios, devoluciones y garantías</h5>
        <ul>
          <li>No se aceptan devoluciones por <strong>cambio de opinión</strong> debido a que cada prenda es única.</li>
          <li>Sólo se considerará una devolución en caso de que la prenda recibida no coincida con la descrita.</li>
          <li>No aplican garantías sobre prendas de segunda mano.</li>
        </ul>

        <h5 class="mt-3">5. Envíos</h5>
        <ul>
          <li>Todos los envios se realizan por correos de mexico.</li>
          <li>Thrift Calido no se hace responsable de los daños que se causen durante el envio.</li>
        </ul>

        <h5 class="mt-3">6. Responsabilidad del usuario</h5>
        <ul>
          <li>El cliente es responsable del uso, cuidado y lavado de la prenda.</li>
          <li>Thrift Cálido Bazar no se hace responsable por daños ocasionados por uso inadecuado o mal lavado.</li>
        </ul>

        <h5 class="mt-3">7. Datos personales</h5>
        <ul>
          <li>Los datos proporcionados se manejan de acuerdo con nuestro <strong>Aviso de Privacidad</strong>.</li>
          <li>El usuario puede solicitar acceso, corrección o eliminación de sus datos enviando correo a: 
            <a href="mailto:thriftcalido@gmail.com">thriftcalido@gmail.com</a>.
          </li>
        </ul>

        <p class="mt-3">
          Para más información, contáctanos por correo electrónico o vía WhatsApp al 
          <a href="https://wa.me/524491851273" target="_blank">449 185 1273</a>.
        </p>

      </div>
    </div>
  </div>
</div>

    <!-- Footer -->
    <footer class="bg-dark text-center text-white py-3 mt-5">
      <p class="mb-1">
        <span style="color: burlywood; font-weight: bold;">&copy; 2025 Thrift Cálido Bazar</span> - Todos los derechos reservados
      </p>
      <a href="#" class="text-white me-3" data-bs-toggle="modal" data-bs-target="#avisoModal">Aviso de Privacidad</a>
      <a href="#" class="text-white" data-bs-toggle="modal" data-bs-target="#terminosModal">Términos y Condiciones</a>
    </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="src/js/pago.js"></script>
  <script src="src/js/navbar-role.js"></script>

</body>
</html>
